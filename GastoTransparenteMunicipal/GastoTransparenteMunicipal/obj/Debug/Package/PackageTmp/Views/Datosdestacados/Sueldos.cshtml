@using Core;
@{
    ViewBag.Title = "Sueldos";
}

<link rel="stylesheet" type="text/css" href="~/Content/css/styleSueldos.css">

<div class="row seccion-destado">
    <div class="col">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Sueldos Promedios
                        <small>
                            del
                            <span class="select">
                                <select id="categoria">
                                    <option value="@OrigenData.MunicipioTotal">Municipio Total</option>
                                    <option value="@OrigenData.Adm">Adm. y Serv. Municipal</option>
                                    <option value="@OrigenData.Salud">Salud</option>
                                    <option value="@OrigenData.Educacion">Educación</option>
                                    <option value="@OrigenData.Cementerio">Cementerio</option>
                                </select>
                            </span>
                        </small>
                        <small>
                            del año:
                            <span class="select">
                                @Html.DropDownList("name", (SelectList)ViewBag.Anos, null, new { @class = "muntotal", @id = "ano" })
                            </span>
                        </small>
                    </h1>
                    <p>En esta sección puedes conocer el detalle las remuneraciones promedio de las personas que trabajan en el municipio</p>
                </div>
            </div>

            <div class="row padding-Div">
                <div class="col-md-12">
                    <div id="tabla" class="row muntotal">
                        <div class="col-12 col-sm-4">
                            <div class="row">
                                <div id="padre1" onclick="cambioPadre(1)" class="padres align-self-center col-6 col-sm-12 borde-papa">
                                    <h5>&nbsp;&nbsp;<span class="md-36 icon-Recurso9"></span>&nbsp; Estamento <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>
                                <div id="padre2" onclick="cambioPadre(2)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso13"></span> Profesiones <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>
                                <div id="padre3" onclick="cambioPadre(3)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso10"></span> Nivel Educación <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>
                                <div id="padre4" onclick="cambioPadre(4)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso8"></span> Rango etario <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>
                                <div id="padre5" onclick="cambioPadre(5)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso11"></span> Calidad jurídica <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>
                                <div id="padre6" onclick="cambioPadre(6)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso4"></span> Antigüedad <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>
                                <div id="padre7" onclick="cambioPadre(7)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso12"></span> Grado <span class="cssToolTip"><span class="md-16 icon-Recurso-help"></span><span class="oculto">Este item se refiere a su nivel educacional que posee para realizar la clasificacion y categorizarlo.</span></span></h5>
                                </div>

                            </div>
                        </div>
                        <div class="col-12 col-sm-8">
                            <div class="row borde">
                                <div id="hijosdiv1" class="solo">
                                </div>
                                <div id="hijosdiv2" class="solo hidden">
                                </div>
                                <div id="hijosdiv3" class="solo hidden">
                                </div>
                                <div id="hijosdiv4" class="solo hidden">
                                </div>
                                <div id="hijosdiv5" class="solo hidden">
                                </div>
                                <div id="hijosdiv6" class="solo hidden">
                                </div>
                                <div id="hijosdiv7" class="solo hidden">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <p><small>*La información presentada en la seccion es subida y presentada exclusivamente por el municipio.</small></p>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts{

    <script src="~/Scripts/select.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            $("select").resizeselect();
            consultaBd();

            $("select").change(function () {
                consultaBd();
            });
        });

        function cambioPadre(aux) {
            for (var i = 1; i < 8; i++) {
                $("#hijosdiv" + i).addClass("hidden");
                $("#padre" + i).removeClass("borde-papa");
                $("#padre" + i).addClass("no-papa");
            }
            $("#hijosdiv" + aux).removeClass("hidden");
            $("#padre" + aux).addClass("borde-papa");
            $("#padre" + aux).removeClass("no-papa");
        }
        function consultaBd() {
            for (var i = 2; i < 8; i++) {
                $("#padre" + i).removeClass("borde-papa");
                $("#padre" + i).addClass("no-papa");

            }
            $("#padre1").addClass("borde-papa");
            $("#padre1").removeClass("no-papa");
            $.ajax({
                cache: false,
                async: false,
                type: 'POST',
                data: {
                    origenData: $("#categoria").val(),
                    year: $("#ano").val()
                },
                url: '@Url.Action("PersonalSalary", "FeaturedData")',
                dataType: 'json',
                success: function (data) {
                    $(".hijos").remove();

                    $.each(data, function (index, item) {
                        $("#hijosdiv" + item.Item).append(cabezera());
                        $.each(item.Lista, function (index2, item2) {
                            if (index2 == 0) {
                                $("#hijosdiv" + item.Item).append(nuevoHijo(item2, "hijos-primero"));
                            } else {
                                $("#hijosdiv" + item.Item).append(nuevoHijo(item2,""));
                            }
                            
                        });
                    });
                },
                //error: function (msg) {
                //    $('#btnagendar').attr('disabled', false);
                //}
            });
        }
        function nuevoHijo(item,nomclas) {
            return '\
                    <div class="col-md-12 hijos '+ nomclas +' text-center">\
                        <div class="row">\
                            <div class="col-4 align-self-center">\
                                <h6>' + item.Nombre + '</h6>\
                            </div>\
                            <div class="col-4 align-self-center">\
                                <div class="row">\
                                    <div class="col-12"><div class="row"><div class="col-5 text-right align-self-center"><span class="md-36 icon-Recurso15"></span></div><div class="col-7 text-left align-self-center">$' + puntos(item.MHombre) + '</div></div></div>\
                                    <div class="col-12"><div class="row"><div class="col-5 text-right align-self-center"><span class="md-36 icon-Recurso14"></span></div><div class="col-7 text-left align-self-center">$' + puntos(item.MMujer) + '</div></div></div>\
                                </div>\
                            </div>\
                            <div class="col-4 align-self-center">\
                                <div class="row">\
                                    <div class="col-12"> ' + puntos(item.CHombre) + '</div>\
                                    <div class="col-12"> ' + puntos(item.CMujer) + '</div>\
                                </div>\
                            </div>\
                        </div>\
                    </div>\
                    ';
        }

        function cabezera() {
            return '\
                <div class="col-md-12 cabezera">\
                    <div class="row">\
                        <div class="col-4 align-self-center">\
                            <h6></h6>\
                        </div>\
                        <div class="col-4 align-self-center">\
                            <div class="row">\
                                <div class="col-12 text-center"><p><br>Remuneración Promedio<br></p></div>\
                            </div>\
                        </div>\
                        <div class="col-4 align-self-center">\
                            <div class="row">\
                                <div class="col-12 text-center"><p><br>Cantidad de Funcionarios<br></p></div>\
                            </div>\
                        </div>\
                    </div>\
                </div>\
                '
        }
    </script>



}