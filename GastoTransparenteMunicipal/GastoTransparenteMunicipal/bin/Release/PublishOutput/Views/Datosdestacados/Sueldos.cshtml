@using Core;
@{
    ViewBag.Title = "Sueldos";
}

<link rel="stylesheet" type="text/css" href="~/Content/css/styleSueldos.css">

<div class="row seccion-destado">
    <div class="col">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Sueldos Promedios
                        <small>
                            del
                            <span class="select">
                                <select id="categoria">
                                    <option value="@OrigenData.MunicipioTotal">Municipio Total</option>
                                    <option value="@OrigenData.Adm">Adm. y Serv. Municipal</option>
                                    <option value="@OrigenData.Salud">Salud</option>
                                    <option value="@OrigenData.Educacion">Educación</option>
                                    <option value="@OrigenData.Cementerio">Cementerio</option>
                                </select>
                            </span>
                        </small>
                        <small>
                            del año:
                            <span class="select">
                                @Html.DropDownList("name", (SelectList)ViewBag.Anos, null, new { @class = "muntotal", @id = "ano" })
                            </span>
                        </small>
                    </h1>
                    <p>En esta sección puedes conocer el detalle las remuneraciones promedio de las personas que trabajan en el municipio</p>
                </div>
            </div>

            <div class="row padding-Div">
                <div class="col-md-12">
                    <div id="tabla" class="row muntotal">
                        <div class="col-12 col-sm-4">
                            <div class="row">
                                <div id="padre1" onclick="cambioPadre(1)" class="padres align-self-center col-6 col-sm-12 borde-papa">
                                    <h5>&nbsp;&nbsp;<span class="md-36 icon-Recurso9"></span>&nbsp; Estamento</h5>
                                </div>
                                <div id="padre2" onclick="cambioPadre(2)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso13"></span> Profesiones</h5>
                                </div>
                                <div id="padre3" onclick="cambioPadre(3)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso10"></span> Nivel Educación</h5>
                                </div>
                                <div id="padre4" onclick="cambioPadre(4)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso8"></span> Rango etario</h5>
                                </div>
                                <div id="padre5" onclick="cambioPadre(5)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso11"></span> Calidad jurídica</h5>
                                </div>
                                <div id="padre6" onclick="cambioPadre(6)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso4"></span> Antigüedad</h5>
                                </div>
                                <div id="padre7" onclick="cambioPadre(7)" class="padres align-self-center col-6 col-sm-12 no-papa">
                                    <h5><span class="md-36 icon-Recurso12"></span> Grado</h5>
                                </div>

                            </div>
                        </div>
                        <div class="col-12 col-sm-8">
                            <div class="row borde">
                                <div class="col-md-12">
                                    <div class="row ">
                                        <div class="col-4 align-self-center">
                                            <h6></h6>
                                        </div>
                                        <div class="col-4 align-self-center">
                                            <div class="row">
                                                <div class="col-12 text-center"><br />Remuneración Promedio<br /></div>
                                            </div>
                                        </div>
                                        <div class="col-4 align-self-center">
                                            <div class="row">
                                                <div class="col-12 text-center"><br />Cantidad de Funcionarios<br /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="hijosdiv1" class="solo">
                                </div>
                                <div id="hijosdiv2" class="solo hidden">
                                </div>
                                <div id="hijosdiv3" class="solo hidden">
                                </div>
                                <div id="hijosdiv4" class="solo hidden">
                                </div>
                                <div id="hijosdiv5" class="solo hidden">
                                </div>
                                <div id="hijosdiv6" class="solo hidden">
                                </div>
                                <div id="hijosdiv7" class="solo hidden">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts{

    <script src="~/Scripts/select.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            $("select").resizeselect();
            consultaBd();

            $("select").change(function () {
                consultaBd();
            });
        });

        function cambioPadre(aux) {
            for (var i = 1; i < 8; i++) {
                $("#hijosdiv" + i).addClass("hidden");
                $("#padre" + i).removeClass("borde-papa");
                $("#padre" + i).addClass("no-papa");
            }
            $("#hijosdiv" + aux).removeClass("hidden");
            $("#padre" + aux).addClass("borde-papa");
            $("#padre" + aux).removeClass("no-papa");
        }
        function consultaBd() {
            for (var i = 2; i < 8; i++) {
                $("#padre" + i).removeClass("borde-papa");
                $("#padre" + i).addClass("no-papa");

            }
            $("#padre1").addClass("borde-papa");
            $("#padre1").removeClass("no-papa");
            $.ajax({
                cache: false,
                async: false,
                type: 'POST',
                data: {
                    origenData: $("#categoria").val(),
                    year: $("#ano").val()
                },
                url: '@Url.Action("PersonalSalary", "FeaturedData")',
                dataType: 'json',
                success: function (data) {
                    $(".hijos").remove();

                    $.each(data, function (index, item) {
                        $.each(item.Lista, function (index2, item2) {
                            $("#hijosdiv" + item.Item).append(nuevoHijo(item2));
                        });
                    });
                },
                //error: function (msg) {
                //    $('#btnagendar').attr('disabled', false);
                //}
            });
        }
        function nuevoHijo(item) {
            return '\
                    <div class="col-md-12 hijos text-center">\
                        <div class="row">\
                            <div class="col-4 align-self-center">\
                                <h6>' + item.Nombre + '</h6>\
                            </div>\
                            <div class="col-4 align-self-center">\
                                <div class="row">\
                                    <div class="col-12"><div class="row"><div class="col-5 text-right align-self-center"><span class="md-36 icon-Recurso14"></span></div><div class="col-7 text-left align-self-center">$' + puntos(item.MMujer) + '</div></div></div>\
                                    <div class="col-12"><div class="row"><div class="col-5 text-right align-self-center"><span class="md-36 icon-Recurso15"></span></div><div class="col-7 text-left align-self-center">$' + puntos(item.MHombre) + '</div></div></div>\
                                </div>\
                            </div>\
                            <div class="col-4 align-self-center">\
                                <div class="row">\
                                    <div class="col-12"> ' + puntos(item.CMujer) + '</div>\
                                    <div class="col-12"> ' + puntos(item.CHombre) + '</div>\
                                </div>\
                            </div>\
                        </div>\
                    </div>\
                    ';
        }
    </script>



}